import{R as B,r as I,X as S,Y as G,Z as Le,c as L,$ as X,a0 as M,a1 as Te,a2 as P,S as Q,M as Re,U as je,t as Me,a3 as Ce,B as Be,a4 as Ge}from"./title-C_qmO4PJ.js";import{l as me,j as Ae,h as Ue,E as Fe}from"./el-button-DwZzQmwd.js";import{d as Ne,a9 as He,r as $,q as U,l as D,x as R,j as F,a1 as qe,k as Ke,v as ze,F as k,f as N,Z as We,a0 as Ze,u as Ye,a2 as Ve,a3 as Xe,a4 as Je}from"./index-CK9urb8D.js";function kt(e){return e}var z=B(I,"WeakMap"),Qe=Object.prototype;function ke(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||Qe;return e===t}function er(e,r){for(var t=-1,a=Array(e);++t<e;)a[t]=r(t);return a}var rr="[object Arguments]";function ee(e){return S(e)&&G(e)==rr}var we=Object.prototype,tr=we.hasOwnProperty,ar=we.propertyIsEnumerable,xe=ee(function(){return arguments}())?ee:function(e){return S(e)&&tr.call(e,"callee")&&!ar.call(e,"callee")};function nr(){return!1}var Oe=typeof exports=="object"&&exports&&!exports.nodeType&&exports,re=Oe&&typeof module=="object"&&module&&!module.nodeType&&module,sr=re&&re.exports===Oe,te=sr?I.Buffer:void 0,ir=te?te.isBuffer:void 0,W=ir||nr,or="[object Arguments]",lr="[object Array]",ur="[object Boolean]",fr="[object Date]",cr="[object Error]",gr="[object Function]",dr="[object Map]",pr="[object Number]",vr="[object Object]",_r="[object RegExp]",yr="[object Set]",br="[object String]",hr="[object WeakMap]",Tr="[object ArrayBuffer]",mr="[object DataView]",Ar="[object Float32Array]",wr="[object Float64Array]",xr="[object Int8Array]",Or="[object Int16Array]",$r="[object Int32Array]",Dr="[object Uint8Array]",Ir="[object Uint8ClampedArray]",Pr="[object Uint16Array]",Er="[object Uint32Array]",f={};f[Ar]=f[wr]=f[xr]=f[Or]=f[$r]=f[Dr]=f[Ir]=f[Pr]=f[Er]=!0;f[or]=f[lr]=f[Tr]=f[ur]=f[mr]=f[fr]=f[cr]=f[gr]=f[dr]=f[pr]=f[vr]=f[_r]=f[yr]=f[br]=f[hr]=!1;function Sr(e){return S(e)&&me(e.length)&&!!f[G(e)]}function Lr(e){return function(r){return e(r)}}var $e=typeof exports=="object"&&exports&&!exports.nodeType&&exports,E=$e&&typeof module=="object"&&module&&!module.nodeType&&module,Rr=E&&E.exports===$e,H=Rr&&Le.process,ae=function(){try{var e=E&&E.require&&E.require("util").types;return e||H&&H.binding&&H.binding("util")}catch{}}(),ne=ae&&ae.isTypedArray,De=ne?Lr(ne):Sr,jr=Object.prototype,Mr=jr.hasOwnProperty;function Cr(e,r){var t=L(e),a=!t&&xe(e),i=!t&&!a&&W(e),n=!t&&!a&&!i&&De(e),l=t||a||i||n,c=l?er(e.length,String):[],g=c.length;for(var u in e)(r||Mr.call(e,u))&&!(l&&(u=="length"||i&&(u=="offset"||u=="parent")||n&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Ae(u,g)))&&c.push(u);return c}function Br(e,r){return function(t){return e(r(t))}}var Gr=Br(Object.keys,Object),Ur=Object.prototype,Fr=Ur.hasOwnProperty;function Nr(e){if(!ke(e))return Gr(e);var r=[];for(var t in Object(e))Fr.call(e,t)&&t!="constructor"&&r.push(t);return r}function Hr(e){return Ue(e)?Cr(e):Nr(e)}function qr(e,r){for(var t=-1,a=r.length,i=e.length;++t<a;)e[i+t]=r[t];return e}function Kr(){this.__data__=new X,this.size=0}function zr(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}function Wr(e){return this.__data__.get(e)}function Zr(e){return this.__data__.has(e)}var Yr=200;function Vr(e,r){var t=this.__data__;if(t instanceof X){var a=t.__data__;if(!M||a.length<Yr-1)return a.push([e,r]),this.size=++t.size,this;t=this.__data__=new Te(a)}return t.set(e,r),this.size=t.size,this}function x(e){var r=this.__data__=new X(e);this.size=r.size}x.prototype.clear=Kr;x.prototype.delete=zr;x.prototype.get=Wr;x.prototype.has=Zr;x.prototype.set=Vr;function Xr(e,r){for(var t=-1,a=e==null?0:e.length,i=0,n=[];++t<a;){var l=e[t];r(l,t,e)&&(n[i++]=l)}return n}function Jr(){return[]}var Qr=Object.prototype,kr=Qr.propertyIsEnumerable,se=Object.getOwnPropertySymbols,et=se?function(e){return e==null?[]:(e=Object(e),Xr(se(e),function(r){return kr.call(e,r)}))}:Jr;const rt=et;function tt(e,r,t){var a=r(e);return L(e)?a:qr(a,t(e))}function ie(e){return tt(e,Hr,rt)}var Z=B(I,"DataView"),Y=B(I,"Promise"),V=B(I,"Set"),oe="[object Map]",at="[object Object]",le="[object Promise]",ue="[object Set]",fe="[object WeakMap]",ce="[object DataView]",nt=P(Z),st=P(M),it=P(Y),ot=P(V),lt=P(z),O=G;(Z&&O(new Z(new ArrayBuffer(1)))!=ce||M&&O(new M)!=oe||Y&&O(Y.resolve())!=le||V&&O(new V)!=ue||z&&O(new z)!=fe)&&(O=function(e){var r=G(e),t=r==at?e.constructor:void 0,a=t?P(t):"";if(a)switch(a){case nt:return ce;case st:return oe;case it:return le;case ot:return ue;case lt:return fe}return r});const ge=O;var ut=I.Uint8Array;const de=ut;var ft="__lodash_hash_undefined__";function ct(e){return this.__data__.set(e,ft),this}function gt(e){return this.__data__.has(e)}function C(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new Te;++r<t;)this.add(e[r])}C.prototype.add=C.prototype.push=ct;C.prototype.has=gt;function dt(e,r){for(var t=-1,a=e==null?0:e.length;++t<a;)if(r(e[t],t,e))return!0;return!1}function pt(e,r){return e.has(r)}var vt=1,_t=2;function Ie(e,r,t,a,i,n){var l=t&vt,c=e.length,g=r.length;if(c!=g&&!(l&&g>c))return!1;var u=n.get(e),h=n.get(r);if(u&&h)return u==r&&h==e;var _=-1,d=!0,T=t&_t?new C:void 0;for(n.set(e,r),n.set(r,e);++_<c;){var y=e[_],b=r[_];if(a)var m=l?a(b,y,_,r,e,n):a(y,b,_,e,r,n);if(m!==void 0){if(m)continue;d=!1;break}if(T){if(!dt(r,function(s,o){if(!pt(T,o)&&(y===s||i(y,s,t,a,n)))return T.push(o)})){d=!1;break}}else if(!(y===b||i(y,b,t,a,n))){d=!1;break}}return n.delete(e),n.delete(r),d}function yt(e){var r=-1,t=Array(e.size);return e.forEach(function(a,i){t[++r]=[i,a]}),t}function bt(e){var r=-1,t=Array(e.size);return e.forEach(function(a){t[++r]=a}),t}var ht=1,Tt=2,mt="[object Boolean]",At="[object Date]",wt="[object Error]",xt="[object Map]",Ot="[object Number]",$t="[object RegExp]",Dt="[object Set]",It="[object String]",Pt="[object Symbol]",Et="[object ArrayBuffer]",St="[object DataView]",pe=Q?Q.prototype:void 0,q=pe?pe.valueOf:void 0;function Lt(e,r,t,a,i,n,l){switch(t){case St:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Et:return!(e.byteLength!=r.byteLength||!n(new de(e),new de(r)));case mt:case At:case Ot:return Re(+e,+r);case wt:return e.name==r.name&&e.message==r.message;case $t:case It:return e==r+"";case xt:var c=yt;case Dt:var g=a&ht;if(c||(c=bt),e.size!=r.size&&!g)return!1;var u=l.get(e);if(u)return u==r;a|=Tt,l.set(e,r);var h=Ie(c(e),c(r),a,i,n,l);return l.delete(e),h;case Pt:if(q)return q.call(e)==q.call(r)}return!1}var Rt=1,jt=Object.prototype,Mt=jt.hasOwnProperty;function Ct(e,r,t,a,i,n){var l=t&Rt,c=ie(e),g=c.length,u=ie(r),h=u.length;if(g!=h&&!l)return!1;for(var _=g;_--;){var d=c[_];if(!(l?d in r:Mt.call(r,d)))return!1}var T=n.get(e),y=n.get(r);if(T&&y)return T==r&&y==e;var b=!0;n.set(e,r),n.set(r,e);for(var m=l;++_<g;){d=c[_];var s=e[d],o=r[d];if(a)var p=l?a(o,s,d,r,e,n):a(s,o,d,e,r,n);if(!(p===void 0?s===o||i(s,o,t,a,n):p)){b=!1;break}m||(m=d=="constructor")}if(b&&!m){var A=e.constructor,v=r.constructor;A!=v&&"constructor"in e&&"constructor"in r&&!(typeof A=="function"&&A instanceof A&&typeof v=="function"&&v instanceof v)&&(b=!1)}return n.delete(e),n.delete(r),b}var Bt=1,ve="[object Arguments]",_e="[object Array]",j="[object Object]",Gt=Object.prototype,ye=Gt.hasOwnProperty;function Ut(e,r,t,a,i,n){var l=L(e),c=L(r),g=l?_e:ge(e),u=c?_e:ge(r);g=g==ve?j:g,u=u==ve?j:u;var h=g==j,_=u==j,d=g==u;if(d&&W(e)){if(!W(r))return!1;l=!0,h=!1}if(d&&!h)return n||(n=new x),l||De(e)?Ie(e,r,t,a,i,n):Lt(e,r,g,t,a,i,n);if(!(t&Bt)){var T=h&&ye.call(e,"__wrapped__"),y=_&&ye.call(r,"__wrapped__");if(T||y){var b=T?e.value():e,m=y?r.value():r;return n||(n=new x),i(b,m,t,a,n)}}return d?(n||(n=new x),Ct(e,r,t,a,i,n)):!1}function Pe(e,r,t,a,i){return e===r?!0:e==null||r==null||!S(e)&&!S(r)?e!==e&&r!==r:Ut(e,r,t,a,Pe,i)}function Ft(e,r){return e!=null&&r in Object(e)}function Nt(e,r,t){r=je(r,e);for(var a=-1,i=r.length,n=!1;++a<i;){var l=Me(r[a]);if(!(n=e!=null&&t(e,l)))break;e=e[l]}return n||++a!=i?n:(i=e==null?0:e.length,!!i&&me(i)&&Ae(l,i)&&(L(e)||xe(e)))}function ea(e,r){return e!=null&&Nt(e,r,Ft)}function ra(e,r){return Pe(e,r)}var Ht=0;function qt(e){var r=++Ht;return Ce(e)+r}const Kt=e=>(Ve("data-v-9c60e4f8"),e=e(),Xe(),e),zt=["onDragstart"],Wt=["src"],Zt=["innerHTML"],Yt=Kt(()=>D("div",{class:"text-white text-lg"},"拖出删除",-1)),be="dragging",K="drop-file",he="dragging-item",Vt=Ne({__name:"draggable",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const r=He(e,"modelValue"),t=$(),a=s=>{s.preventDefault(),t.value.classList.add(K)},i=s=>{s.preventDefault(),s.stopPropagation(),t.value.classList.remove(K)},n=s=>{s.filter(p=>p.type.startsWith("image/")).forEach(p=>{const A=URL.createObjectURL(p),v=new FileReader;v.readAsDataURL(p),v.onload=function(w){var J;const Ee=w.target.result,Se={id:qt(),name:p.name,url:A,base64:Ee,type:p.type};(J=r.value)==null||J.push(Se)}})},l=s=>{var p;s.preventDefault(),t.value.classList.remove(K);const o=[...((p=s.dataTransfer)==null?void 0:p.files)??[]];n(o)},c=$(),g=$(),u=s=>{var o;(o=t.value)==null||o.classList.add(be),setTimeout(()=>{s.target&&s.target.classList.add(he)},0),c.value=s.target,d.value=!0},h=s=>{var w;if(s.preventDefault(),s.target===c.value||s.target===g.value.$el||!c.value)return;const o=Array.from(((w=g.value.$el)==null?void 0:w.children)??[]),p=o.indexOf(c.value),A=o.indexOf(s.target);if(!r.value)return;let v=r.value[p];r.value[p]=r.value[A],r.value[A]=v},_=s=>{var o;(o=t.value)==null||o.classList.remove(be),s.target&&s.target.classList.remove(he),d.value=!1},d=$(!1),T=$(),y=()=>{var s;(s=r.value)==null||s.splice(r.value.findIndex(o=>o===T.value),1)},b=s=>{const o=s.target;n([...o.files??[]]),o.value=""},m=$();return(s,o)=>{const p=Fe,A=Be;return N(),U(k,null,[D("div",{class:"relative z-10 bg-white container flex-shrink-0 w-64 rounded-md h-full border-[2px] transition-all border-cyan-400 overflow-auto",onDrop:l,onDragleave:i,onDragover:a,ref_key:"containerRef",ref:t},[R(qe,{class:"flex relative flex-col gap-2 p-2 w-full mb-9 draggable transition-all",onDragstart:u,onDragenter:h,onDragend:_,ref_key:"labelFileRef",ref:g,name:"list",tag:"div"},{default:F(()=>[(N(!0),U(k,null,We(r.value,v=>(N(),U("div",{class:"draggable-item text-nowrap w-full h-14 p-2 rounded-md select-none text-lg bg-slate-100 flex items-center gap-2 cursor-pointer hover:bg-slate-200 active:bg-slate-300 hover:scale-[1.02] transition-all",onClick:o[0]||(o[0]=w=>{w.stopPropagation(),w.preventDefault()}),draggable:"true",onDragstart:w=>T.value=v,key:v.id},[D("img",{src:v.url,class:"aspect-square h-full rounded-md pointer-events-none",draggable:"false",alt:""},null,8,Wt),D("div",{class:"text-ellipsis overflow-hidden pointer-events-none",draggable:"false",innerHTML:v.name},null,8,Zt)],40,zt))),128))]),_:1},512),R(p,{class:"upload-btn",type:"success",onClick:o[1]||(o[1]=v=>{var w;return(w=m.value)==null?void 0:w.click()})},{default:F(()=>[Ze(" 点击上传 ")]),_:1}),D("input",{class:"hidden",type:"file",accept:".jpg,.jpeg,.png,.gif,.svg",multiple:!0,onChange:b,ref_key:"fileInputRef",ref:m,name:"file"},null,544)],544),Ke(D("div",{class:"mask flex flex-col items-center gap-4 justify-center",onDragover:o[2]||(o[2]=v=>v.preventDefault()),onDrop:y},[R(A,{size:"36",color:"white"},{default:F(()=>[R(Ye(Ge))]),_:1}),Yt],544),[[ze,d.value]])],64)}}}),ta=Je(Vt,[["__scopeId","data-v-9c60e4f8"]]);export{ta as D,x as S,ra as a,Pe as b,xe as c,qr as d,ea as h,kt as i,Hr as k};

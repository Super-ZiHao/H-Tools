import{d as V,r as c,b as k,l as v,e as z,f as s,P as B,aa as g,E as h,a7 as x,I as b,H as E,c as j,ac as C,ad as T,ab as A}from"./index-CPBAgtqF.js";function w(t){return/^[A-Za-z_][A-Za-z0-9_]*$/.test(t)?!["abstract","arguments","await","boolean","break","byte","case","catch","char","class","const","continue","debugger","default","delete","do","double","else","enum","eval","export","extends","false","final","finally","float","for","function","goto","if","implements","import","in","instanceof","int","interface","let","long","native","new","null","package","private","protected","public","return","short","static","super","switch","synchronized","this","throw","throws","transient","true","try","typeof","var","void","volatile","while","with","yield"].includes(t):!1}function N(t){if(!t.startsWith("data:image/"))return"Invalid base64 string";const n=t.substring(t.indexOf("image/")+6,t.indexOf(";"));switch(n){case"svg+xml":return"svg";case"x-icon":return"ico";case"vnd.microsoft.icon":return"ico";default:return n}}function y(t,n={}){const{name:l="image_",mimeType:r,chunkSize:o=5}=n;let i=1,u=0;const d=a=>{let e=document.createElement("a");e.href=a,e.download=`${l}_${i}.${r??N(a)}`,document.body.appendChild(e),e.click(),document.body.removeChild(e),i++},f=_.chunk(t,o),m=setInterval(()=>{f[u].forEach(d),u+=1,u>f.length-1&&clearInterval(m)},1e3)}function S(t){return typeof t!="string"||t.trim().length===0?!1:/^data:image\/(png|jpeg|gif|bmp|svg\+xml);base64,(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}const I=t=>(C("data-v-8ee0ffa2"),t=t(),T(),t),$=I(()=>s("div",{class:"text-2xl mb-6"},"批量下载 base64 图",-1)),J={class:"shadow-2xl border rounded-xl w-full h-full max-w-[1280px] p-4 flex items-start flex-col gap-3"},O={class:"w-full flex justify-between items-center h-8"},Z={class:"grid grid-cols-3 grid-rows-2 mt-4 px-4 gap-y-4 gap-x-4 w-full",style:{"justify-self":"end"}},R={class:"flex gap-3 items-center"},D={class:"flex gap-3 items-center"},M=I(()=>s("div",{class:"mt-auto mx-auto"},[s("span",{class:"text-sm text-gray-400"},"ps: 编辑器最外层仅能为数组格式，否则程序将会无法使用")],-1)),P=V({__name:"base64Img",setup(t){const n=c([]),l=c(""),r=c("image_"),o=c(!1),i=c(),u=c();k(()=>{i.value&&(u.value=new JSONEditor(i.value,{mode:"code",mainMenuBar:!1,schema:{base64:[]},onChangeText(a){try{const e=JSON.parse(a);n.value=e,o.value=!1}catch{o.value=!0}}}),u.value.setText(`[
  
]`))});const d=v(()=>{if(l.value==="")return!1;const a=l.value.split(".");return(a==null?void 0:a.length)<2?!w(l.value):!!a.some(e=>!w(e))}),f=()=>{if(o.value)return alert("您输入的 Json 格式有误，请重新输入");if(d.value)return alert("请按照 a.b.c 的 方式重新输入");if(m.value===0)return alert("当前检测出的图片数量为 0");const a=l.value??"";switch(!0){case a==="":{y(n.value,{name:r.value});return}default:{y(n.value.map(e=>_.get(e,a)),{name:r.value});return}}},m=v(()=>{if(o.value||d.value)return 0;const a=n.value.map(e=>_.get(e,l.value));return(l.value===""?n.value:a).filter(e=>S(e)).length});return(a,e)=>(j(),z(E,null,[$,s("div",J,[s("div",O,[s("div",null,"当前数可下载图片数量: "+B(m.value),1),s("div",{class:"flex items-centr gap-4 h-full"},[s("button",{class:"h-full px-4 bg-blue-500 hover:bg-blue-600 active:bg-blue-700 transition-all text-white rounded-md",onClick:f},"下载")])]),s("div",{class:"JSON-Editor",ref_key:"jsonRef",ref:i},null,512),s("div",Z,[s("div",R,[g(" 名称前缀: "),h(s("input",{class:b("border h-9 w-40 border-cyan-400 rounded-md px-2"),type:"text",placeholder:"例: user","onUpdate:modelValue":e[0]||(e[0]=p=>r.value=p)},null,512),[[x,r.value]])]),s("div",D,[g(" 属性层级: "),h(s("input",{class:b(`border h-9 w-40 border-cyan-400 rounded-md px-2 ${d.value?"outline-red-600 outline-2 outline outline-offset-[-2px]":""}`),type:"text",placeholder:"例: a.b.c","onUpdate:modelValue":e[1]||(e[1]=p=>l.value=p)},null,2),[[x,l.value]])])]),M])],64))}}),U=A(P,[["__scopeId","data-v-8ee0ffa2"]]);export{U as default};

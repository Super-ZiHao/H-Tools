import{_ as I}from"./index-LoO9y-Ps.js";const C=s=>(Vue.pushScopeId("data-v-417121a4"),s=s(),Vue.popScopeId(),s),B=["onDragstart"],$=["src"],L=["innerHTML"],P=C(()=>Vue.createElementVNode("div",{class:"text-white text-lg"},"拖出删除",-1)),N="dragging",b="drop-file",y="dragging-item",S=Vue.defineComponent({__name:"draggable",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(s){const u=Vue.useModel(s,"modelValue"),r=Vue.ref(),c=t=>{t.preventDefault(),r.value.classList.add(b)},V=t=>{t.preventDefault(),t.stopPropagation(),r.value.classList.remove(b)},p=t=>{t.filter(a=>a.type.startsWith("image/")).forEach(a=>{var k;const o=URL.createObjectURL(a),E=new Image;E.src=o;const v={id:_.uniqueId(),name:a.name,url:o,type:a.type};(k=u.value)==null||k.push(v)})},g=t=>{var a;t.preventDefault(),r.value.classList.remove(b);const l=[...((a=t.dataTransfer)==null?void 0:a.files)??[]];p(l)},d=Vue.ref(),m=Vue.ref(),f=t=>{var l;(l=r.value)==null||l.classList.add(N),setTimeout(()=>{t.target&&t.target.classList.add(y)},0),d.value=t.target,i.value=!0},x=t=>{var v;if(t.preventDefault(),t.target===d.value||t.target===m.value.$el||!d.value)return;const l=Array.from(((v=m.value.$el)==null?void 0:v.children)??[]),a=l.indexOf(d.value),o=l.indexOf(t.target);if(!u.value)return;let E=u.value[a];u.value[a]=u.value[o],u.value[o]=E},h=t=>{var l;(l=r.value)==null||l.classList.remove(N),t.target&&t.target.classList.remove(y),i.value=!1},i=Vue.ref(!1),n=Vue.ref(),e=()=>{var t;(t=u.value)==null||t.splice(u.value.findIndex(l=>l===n.value),1)},D=t=>{const l=t.target;p([...l.files??[]]),l.value=""},w=Vue.ref();return(t,l)=>(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[Vue.createElementVNode("div",{class:"relative z-10 bg-white container flex-shrink-0 w-64 rounded-md h-full border-[2px] transition-all border-cyan-400 overflow-auto",onDrop:g,onDragleave:V,onDragover:c,ref_key:"containerRef",ref:r},[Vue.createVNode(Vue.TransitionGroup,{class:"flex relative flex-col gap-2 p-2 w-full mb-9 draggable transition-all",onDragstart:f,onDragenter:x,onDragend:h,ref_key:"labelFileRef",ref:m,name:"list",tag:"div"},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(u.value,a=>(Vue.openBlock(),Vue.createElementBlock("div",{class:"draggable-item text-nowrap w-full h-14 p-2 rounded-md select-none text-lg bg-slate-100 flex items-center gap-2 cursor-pointer hover:bg-slate-200 active:bg-slate-300 hover:scale-[1.02] transition-all",onClick:l[0]||(l[0]=o=>{o.stopPropagation(),o.preventDefault()}),draggable:"true",onDragstart:o=>n.value=a,key:a.id},[Vue.createElementVNode("img",{src:a.url,class:"aspect-square h-full rounded-md pointer-events-none",draggable:"false",alt:""},null,8,$),Vue.createElementVNode("div",{class:"text-ellipsis overflow-hidden pointer-events-none",draggable:"false",innerHTML:a.name},null,8,L)],40,B))),128))]),_:1},512),Vue.createVNode(Vue.unref(ElementPlus.ElButton),{class:"upload-btn",type:"success",onClick:l[1]||(l[1]=a=>{var o;return(o=w.value)==null?void 0:o.click()})},{default:Vue.withCtx(()=>[Vue.createTextVNode(" 点击上传 ")]),_:1}),Vue.createElementVNode("input",{class:"hidden",type:"file",accept:".jpg,.jpeg,.png,.gif,.svg",multiple:!0,onChange:D,ref_key:"fileInputRef",ref:w,name:"file"},null,544)],544),Vue.withDirectives(Vue.createElementVNode("div",{class:"mask flex flex-col items-center gap-4 justify-center",onDragover:l[2]||(l[2]=a=>a.preventDefault()),onDrop:e},[Vue.createVNode(Vue.unref(ElementPlus.ElIcon),{size:"36",color:"white"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(ElementPlusIconsVue.Delete))]),_:1}),P],544),[[Vue.vShow,i.value]])],64))}}),R=I(S,[["__scopeId","data-v-417121a4"]]),T=s=>(Vue.pushScopeId("data-v-99b44260"),s=s(),Vue.popScopeId(),s),U={key:0,class:"border-[2px] border-cyan-400 p-2 rounded-md h-full flex-1 w-0 flex flex-col gap-4"},z={class:"flex items-center justify-between"},F={class:"flex items-center gap-2 flex-wrap"},G=["src"],O={key:1,class:"border-[2px] border-cyan-400 pb-2 flex-1 rounded-md flex flex-col gap-2 items-center justify-center"},j=T(()=>Vue.createElementVNode("div",{class:"text-gray-500 text-xs"},"暂未上传任何图像",-1)),M=Vue.defineComponent({__name:"spriteImgs",props:{data:{}},setup(s){const u=Vue.ref(0),r=Vue.ref(300),c=Vue.ref(0),V=Vue.ref(3),p=Vue.ref(.5),g=[{value:.5,label:"x0.5"},{value:1,label:"x1"},{value:2,label:"x2"},{value:4,label:"x4"},{value:8,label:"x8"}],d=Vue.ref(0),m=[{value:0,label:"横图"},{value:1,label:"竖图"},{value:2,label:"网格"}],f=Vue.ref(),x=()=>{f.value&&html2canvas(f.value.$el,{backgroundColor:"transparent",scale:p.value}).then(i=>{let n=i.toDataURL("image/png"),e=document.createElement("a");e.href=n,e.download="sprites.png",e.click(),e.remove()})},h=Vue.computed(()=>{switch(d.value){case 0:return"flex items-center";case 1:return"flex flex-col items-center";case 2:return""}});return(i,n)=>i.data.length>0?(Vue.openBlock(),Vue.createElementBlock("div",U,[Vue.createElementVNode("div",z,[Vue.createElementVNode("div",F,[Vue.createVNode(Vue.unref(ElementPlus.ElInput),{style:{width:"90px"},modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=e=>u.value=e)},{prepend:Vue.withCtx(()=>[Vue.createTextVNode("圆角")]),_:1},8,["modelValue"]),Vue.createVNode(Vue.unref(ElementPlus.ElInput),{style:{width:"130px"},modelValue:r.value,"onUpdate:modelValue":n[1]||(n[1]=e=>r.value=e)},{prepend:Vue.withCtx(()=>[Vue.createTextVNode("maxSize")]),_:1},8,["modelValue"]),Vue.createVNode(Vue.unref(ElementPlus.ElInput),{style:{width:"90px"},modelValue:c.value,"onUpdate:modelValue":n[2]||(n[2]=e=>c.value=e)},{prepend:Vue.withCtx(()=>[Vue.createTextVNode("间距")]),_:1},8,["modelValue"]),Vue.createVNode(Vue.unref(ElementPlus.ElSelect),{style:{width:"80px"},modelValue:p.value,"onUpdate:modelValue":n[3]||(n[3]=e=>p.value=e)},{default:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(g,e=>Vue.createVNode(Vue.unref(ElementPlus.ElOption),{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),Vue.createVNode(Vue.unref(ElementPlus.ElSelect),{style:{width:"80px"},modelValue:d.value,"onUpdate:modelValue":n[4]||(n[4]=e=>d.value=e)},{default:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(m,e=>Vue.createVNode(Vue.unref(ElementPlus.ElOption),{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),d.value===2?(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElInput),{key:0,style:{width:"90px"},modelValue:V.value,"onUpdate:modelValue":n[5]||(n[5]=e=>V.value=e)},{prepend:Vue.withCtx(()=>[Vue.createTextVNode("col")]),_:1},8,["modelValue"])):Vue.createCommentVNode("",!0)]),Vue.createVNode(Vue.unref(ElementPlus.ElButton),{type:"primary",onClick:x},{default:Vue.withCtx(()=>[Vue.createTextVNode("下载")]),_:1})]),Vue.createElementVNode("div",{class:Vue.normalizeClass(`imgs-group-background flex-1 ${h.value} rounded-md overflow-auto`)},[Vue.createVNode(Vue.TransitionGroup,{class:Vue.normalizeClass(`imgs-group-${d.value} bg-transparent`),tag:"div",name:"list",ref_key:"imgsContainer",ref:f,style:Vue.normalizeStyle(`gap: ${c.value}px; --max-size:${r.value}px; --col: ${V.value}`)},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(i.data,e=>(Vue.openBlock(),Vue.createElementBlock("img",{class:"transition-all block",key:e.id,src:e.url,style:Vue.normalizeStyle(`border-radius: ${u.value}px; max-width: ${r.value}px; max-height: ${r.value}px`),draggable:"false"},null,12,G))),128))]),_:1},8,["class","style"])],2)])):(Vue.openBlock(),Vue.createElementBlock("div",O,[Vue.createVNode(Vue.unref(ElementPlus.ElIcon),{color:"#6c727f",size:"32"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(ElementPlusIconsVue.Picture))]),_:1}),j]))}}),A=I(M,[["__scopeId","data-v-99b44260"]]),q=Vue.createElementVNode("div",{class:"text-2xl mb-6"},"雪碧图生成器",-1),H={class:"shadow-2xl border rounded-xl w-full h-full max-w-[1440px] p-4 flex gap-4 overflow-hidden"},J=Vue.defineComponent({__name:"index",setup(s){const u=Vue.reactive([]);return(r,c)=>(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[q,Vue.createElementVNode("div",H,[Vue.createVNode(R,{modelValue:u,"onUpdate:modelValue":c[0]||(c[0]=V=>u=V)},null,8,["modelValue"]),Vue.createVNode(A,{data:u},null,8,["data"])])],64))}});export{J as default};
